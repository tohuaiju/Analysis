<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Taxonomy</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <svg width="800" height="600"></svg>

    <script>
        // 数据
        const data = {
            "name": "Plants",
            "children": [
                {
                    "name": "被子植物门",
                    "children": [
                        {
                            "name": "双子叶植物纲",
                            "children": [
                                {
                                    "name": "杜鹃花目",
                                    "children": [
                                        {"name": "凤仙花科", "children": [{"name": "凤仙花属"}]}
                                    ]
                                },
                                {
                                    "name": "中央种子目",
                                    "children": [
                                        {"name": "石竹科", "children": [{"name": "石柱属"}]}
                                    ]
                                },
                                {
                                    "name": "菊目",
                                    "children": [
                                        {"name": "菊科", "children": [{"name": "天人菊属"}]}
                                    ]
                                },
                                {
                                    "name": "",
                                    "children": [
                                        {"name": "十字花科", "children": [{"name": "诸葛菜属"}]}
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        };

        // 创建一个树形布局
        const treeLayout = d3.tree().size([600, 400]);

        // 将数据转换为层次结构
        const root = d3.hierarchy(data);

        // 对数据进行布局
        const treeData = treeLayout(root);

        // 创建一个 SVG 容器
        const svg = d3.select("svg");

        // 创建一个用于绘制树形结构的组元素
        const treeGroup = svg.append("g").attr("transform", "translate(50,50)");

        // 创建连线生成器
        const linkGenerator = d3.linkHorizontal()
            .x(d => d.y)
            .y(d => d.x);

        // 绘制连线
        treeGroup.selectAll("path")
            .data(treeData.links())
            .enter().append("path")
            .attr("d", linkGenerator);

        // 绘制节点
        const nodes = treeGroup.selectAll("g")
            .data(treeData.descendants())
            .enter().append("g")
            .attr("transform", d => `translate(${d.y},${d.x})`);

        nodes.append("circle")
            .attr("r", 5);

        nodes.append("text")
            .text(d => d.data.name)
            .attr("dx", 10)
            .attr("dy", 4);
    </script>
</body>
</html>
